{
  "_id": "200000000000000000000090",
  "name": "CMS List",
  "type": "layout",
  "contentStyle": {
    "display": "flex",
    "flexDirection": "column",
    "height": "100%"
  },
  "layoutStyle": {
    "width": "100%",
    "display": "flex",
    "flex-direction": "column",
    "color": "white",
    "height": "100%"
  },
  "screens": [
    {
      "name": "Filter",
      "type": "layout",
      "layoutStyle": {
        "background": "#2C313D",
        "color": "white",
        "display": "flex",
        "flex-flow": "row wrap",
        "min-height": "40px"
      },
      "init": "obj.ensureExists(this.data, 'filter_cms', {});",
      "screens": [
        {
          "type": "button",
          "buttonType": "mat-icon-button",
          "icon": "filter_list",
          "click": "this.event.send({name: 'toggle-sidenav', key: 'filter_cms'})"
        },
        {
          "type": "div",
          "comment": "spacer",
          "layoutStyle": {
            "flex-grow": 1
          },
          "style": {
            "width": "1px"
          }
        },
        {
          "type": "button",
          "buttonType": "mat-icon-button",
          "icon": "add_circle",
          "click": "this.event.send({\r\n    name: 'open-dialog', \r\n    uiElementId: '200000000000000000000091', \r\n    option: {\r\n        width: '100vw', \r\n        height: '100vh', \r\n        maxWidth: '600px', \r\n        maxHeight: '400px'\r\n    } \r\n});"
        }
      ]
    },
    {
      "type": "side-nav",
      "key": "filter_cms",
      "opened": "this.config.isHandset == false ? true : false",
      "mode": "this.config.isHandset == false ? 'side' : 'over'",
      "layoutStyle": {
        "flex-grow": 1,
        "height": "100%",
        "width": "100%",
        "display": "flex",
        "flex-direction": "column"
      },
      "containerStyle": {
        "display": "flex",
        "flex-direction": "column",
        "height": "100%"
      },
      "sideStyle": {
        "background": "ghostwhite",
        "display": "flex",
        "flexFlow": "row wrap",
        "color": "black",
        "padding": "4px",
        "max-width": "300px"
      },
      "sideScreens": [
        {
          "type": "input",
          "key": "filter_cms._search",
          "default": "``",
          "label": "Cerca ...",
          "floatLabel": "auto",
          "layoutStyle": {
            "width": "100%"
          },
          "style": {
            "width": "100%"
          },
          "changed": "this.event.send({name:'refresh', key: 'cms_list'});"
        },
        {
          "type": "input",
          "key": "filter_cms._id",
          "default": "``",
          "label": "_id",
          "floatLabel": "auto",
          "layoutStyle": {
            "width": "100%"
          },
          "style": {
            "width": "100%"
          },
          "changed": "this.event.send({name:'refresh', key: 'cms_list'});"
        },
        {
          "type": "input",
          "key": "filter_cms.folder",
          "default": "``",
          "label": "Folder",
          "floatLabel": "auto",
          "layoutStyle": {
            "width": "100%"
          },
          "style": {
            "width": "100%"
          },
          "changed": "this.event.send({name:'refresh', key: 'cms_list'});"
        },
        {
          "type": "input",
          "key": "filter_cms.name",
          "default": "``",
          "label": "Filename",
          "floatLabel": "auto",
          "layoutStyle": {
            "width": "100%"
          },
          "style": {
            "width": "100%"
          },
          "changed": "this.event.send({name:'refresh', key: 'cms_list'});"
        },
        {
          "type": "typography",
          "text": " ",
          "style": {
            "height": "64px"
          }
        },
        {
          "type": "button",
          "buttonType": "mat-fab",
          "color": "warn",
          "icon": "search",
          "condition": "this.config.isHandset",
          "click": "this.event.send({name: 'toggle-sidenav', key: 'filter_cms'})",
          "layoutStyle": {
            "position": "absolute",
            "bottom": "24px",
            "right": "24px"
          }
        }
      ],
      "screens": [
        {
          "type": "data-table",
          "tableType": "card",
          "key": "cms_list",
          "src": "`/api/admin/cms?_project_ne=content`",
          "method": "get",
          "transform": "response.data",
          "preProcess": "data = {...data, ...this.data.filter_cms}",
          "layoutStyle": {
            "flex-grow": 1,
            "display": "flex",
            "flex-direction": "column",
            "height": "100%",
            "overflow-y": "auto",
            "width": "100%"
          },
          "style": {
            "width": "100%",
            "display": "flex",
            "flex-direction": "column"
          },
          "contentLayoutStyle": {
            "flex-grow": 1,
            "height": "100%"
          },
          "itemBoxStyle": {
            "cursor": "pointer",
            "margin": "8px",
            "padding": "8px",
            "fontSize": "small",
            "display": "flex",
            "flexFlow": "row wrap"
          },
          "click": "this.event.send({name: 'open-dialog', uiElementId: '200000000000000000000091', data: item, option: {width: '100vw', height: '100vh', maxWidth: '600px', maxHeight: '400px'} })",
          "columns": [
            {
              "type": "typography",
              "key": "type",
              "layoutStyle": {
                "width": "100%"
              },
              "style": {
                "color": "white",
                "padding": "3px",
                "background": "crimson",
                "width": "fit-content",
                "textTransform": "uppercase"
              }
            },
            {
              "type": "typography",
              "format": "`${location.origin}/cms${this.data.folder}/${this.data.name}`",
              "layoutStyle": {
                "width": "100%",
                "marginBottom": "4px",
                "marginTop": "4px"
              },
              "style": {
                "fontSize": "larger",
                "color": "darkblue"
              }
            },
            {
              "type": "typography",
              "key": "folder",
              "label": "Folder",
              "format": "`<small style='padding: 4px; color: grey'>${this.uiElement.label}. </small> <span'>${this._value?this._value:' - '}</span>`",
              "layoutStyle": {
                "width": "100%"
              },
              "style": {
              }
            },
            {
              "type": "typography",
              "key": "folder",
              "label": "Filename",
              "format": "`<small style='padding: 4px; color: grey'>${this.uiElement.label}. </small> <span'>${this._value?this._value:' - '}</span>`",
              "layoutStyle": {
                "width": "100%"
              },
              "style": {
              }
            }
          ]
        }
      ]
    }
  ]
}
