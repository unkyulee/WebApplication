{
  "_id": ObjectId("000000000000000000000013"),  
  "type": "data-table",
  "label": "Angular Navigation Data Table",
  "src": "/adminapi/angular.navigation",
  "list": {
    "src": "/adminapi/angular.navigation?_sort=client_name",
    "size": 1000,
    "method": "get",
    "transform": "response.data",
    "filters": [
      {
        "key": "navigation_name",
        "label": "Navigation",
        "optionSrc": "`/adminapi/core.navigation?_sort=title&module=000000000000000000000000&_search=${this.value}`",
        "optionTransform": "response.data",
        "optionLabel": "name"
      }
    ],
    "table": {
      "groupBy": "navigation_name",
      "columns": [
        {
          "key": "name",
          "label": "name",
          "link": "`detail/${row._id}`"
        },
        {
          "key": "type",
          "label": "type"
        }
      ]
    }
  },
  "detail": {
    "src": "`/adminapi/angular.navigation?_id=${this.id}`",
    "method": "get",
    "transform": "response.data[0]",
    "screen": [
      {
        "name": "angular.navigation",
        "screen": [
          {
            "path": ".",
            "label": "angular.navigation",
            "type": "json-editor"
          }
        ]
      }
    ]
  }
}
{
  "_id": ObjectId("000000000000000000000016"),
  "type": "data-table",
  "name": "Angular UI Elements Data Table",
  "src": "/adminapi/angular.ui",
  "list": {
      "src": "/adminapi/angular.ui",
      "size": 1000,
      "method": "get",
      "transform": "response.data",
      "table": {
          "columns": [
              {
                  "key": "name",
                  "label": "name",
                  "link": "`detail/${row._id}`"
              },
              {
                  "key": "type",
                  "label": "type",
                  "canAutoResize": false
              },
              {
                  "key": "_id",
                  "label": "_id"
              }
          ]
      }
  },
  "detail": {
      "src": "`/adminapi/angular.ui?_id=${this.id}`",
      "method": "get",
      "transform": "response.data[0]",
      "screen": [
          {
              "name": "Angular UI Element Specification",
              "screen": [
                  {
                      "path": ".",
                      "label": "UI Element",
                      "type": "json-editor"
                  }
              ]
          }
      ]
  }
}
{
    "_id": ObjectId("000000000000000000000005"),
    "type": "data-table",
    "name": "CMS Contents Data Table",
    "src": "/adminapi/cms",
    "list": {
        "src": "/adminapi/cms",
        "size": 1000,
        "method": "get",
        "transform": "response.data",
        "table": {
            "groupBy": "navigation_name",
            "columns": [
                {
                    "key": "name",
                    "label": "name",
                    "link": "`detail/${row._id}`"
                },
                {
                    "key": "folder",
                    "label": "folder"
                },
                {
                    "key": "type",
                    "label": "type"
                }
            ]
        }
    },
    "detail": {
        "src": "`/adminapi/cms?_id=${this.id}`",
        "method": "get",
        "transform": "response.data[0]",
        "screen": [
            {
                "screen": [
                    {
                        "key": "navigation_id",
                        "label": "Select base url",
                        "type": "selection",
                        "optionSrc": "`/adminapi/core.navigation?_sort=title&module=cms`",
                        "optionLabel": "name",
                        "optionKey": "_id",
                        "optionTransform": "response.data",
                        "updateAlso": [
                            {
                                "sourceKey": "name",
                                "targetKey": "navigation_name"
                            },
                            {
                                "sourceKey": "url",
                                "targetKey": "navigation_url"
                            }
                        ]
                    },
                    {
                        "key": "name",
                        "label": "name"
                    },
                    {
                        "key": "folder",
                        "label": "folder"
                    },
                    {
                        "key": "content_type",
                        "label": "content_type"
                    },
                    {
                        "key": "content",
                        "label": "content",
                        "type": "text-area"
                    }
                ]
            }
        ]
    }
}
{
    "_id": ObjectId("000000000000000000000116"),
    "navigation_id": "000000000000000000000020",
    "navigation_name": "Site Administration Application",
    "type": "data-table",
    "name": "Data Source Data Table",
    "src": "/adminapi/core.dataservice",
    "list": {
      "src": "/adminapi/core.dataservice",
      "method": "get",
      "size": 1000,
      "transform": "response.data",
      "table": {
        "columns": [
          {
            "key": "name",
            "label": "name",
            "link": "`detail/${row._id}`"
          },
          {
            "key": "type",
            "label": "type",
            "canAutoResize": false
          },
          {
            "key": "description",
            "label": "description"
          }

        ]
      }

    },
    "detail": {
      "src": "`/adminapi/core.dataservice?_id=${this.id}`",
      "method": "get",
      "transform": "response.data[0]",

      "screen": [
        {
          "name": "core.dataservice",
          "screen": [
            {
              "path": ".",
              "label": "core.dataservice",
              "type": "json-editor"
            }
          ]
        }
      ]


    }

  }
{
  "_id": ObjectId("000000000000000000000133"),
  "navigation_id": "000000000000000000000020",
  "navigation_name": "Site Administration Application",
  "type": "data-table",
  "name": "Groups Data Table",
  "src": "/adminapi/core.group",
  "list": {
    "src": "/adminapi/core.group",
    "method": "get",
    "size": 1000,
    "transform": "response.data",
    "filters": [
      {
        "key": "navigation_name",
        "label": "Navigation",
        "optionSrc": "`/adminapi/core.navigation?_sort=title&_search=${this.value}`",
        "optionTransform": "response.data",
        "optionLabel": "name"
      }
    ],
    "table": {
      "groupBy": "navigation_name",
      "columns": [
        {
          "key": "name",
          "label": "name",
          "link": "`detail/${row._id}`"
        },
        {
          "key": "_updated",
          "label": "_updated"
        }
      ]
    }
  },
  "detail": {
    "src": "`/adminapi/core.group?_id=${this.id}`",
    "method": "get",
    "transform": "response.data[0]",
    "screen": [
      {
        "name": "Group Details",
        "screen": [
          {
            "key": "_id",
            "label": "_id",
            "readonly": true
          },
          {
            "key": "name",
            "label": "name"
          },
          {
            "key": "users",
            "label": "users",
            "type": "selection",
            "multiple": true,
            "optionSrc": "/adminapi/user",
            "optionTransform": "response.data",
            "optionLabel": "name",
            "optionKey": "_id"
          },
          {
            "key": "_created",
            "label": "_created",
            "type": "date",
            "readonly": true
          },
          {
            "key": "_updated",
            "label": "_updated",
            "type": "date",
            "readonly": true
          }
        ]
      }
    ]
  }
}
{
  "_id": ObjectId("000000000000000000000010"),
  "type": "data-table",
  "name": "core.navigation",
  "src": "/adminapi/core.navigation",
  "list": {
    "src": "/adminapi/core.navigation?_sort_desc=priority",
    "method": "get",
    "size": 1000,
    "transform": "response.data",
    "table": {
      "enableCheckbox": true,
      "columns": [
        {
          "key": "name",
          "label": "name",
          "link": "`detail/${row._id}`",
          "canAutoResize": true
        },
        {
          "key": "url",
          "label": "url",
          "canAutoResize": false
        },
        {
          "key": "priority",
          "label": "priority",
          "canAutoResize": false
        }
      ]
    }
  },
  "detail": {
    "src": "`/adminapi/core.navigation?_id=${this.id}`",
    "method": "get",
    "transform": "response.data[0]",
    "screen": [
      {
        "name": "core.navigation",
        "screen": [
          {
            "path": ".",
            "label": "core.navigation",
            "type": "json-editor"
          }
        ]
      }
    ]
  }
}
{
  "_id": ObjectId("000000000000000000000136"),
  "navigation_id": "000000000000000000000020",
  "navigation_name": "Site Administration Application",
  "type": "data-table",
  "name": "Roles Data Table",
  "src": "/adminapi/core.role",
  "list": {
    "src": "/adminapi/core.role",
    "method": "get",
    "size": 1000,
    "transform": "response.data",
    "filters": [
      {
        "key": "navigation_name",
        "label": "Navigation",
        "optionSrc": "`/adminapi/core.navigation?_sort=title&_search=${this.value}`",
        "optionTransform": "response.data",
        "optionLabel": "name"
      }
    ],
    "table": {
      "groupBy": "navigation_name",
      "columns": [        
        {
          "key": "name",
          "label": "name",
          "link": "`detail/${row._id}`",
          "canAutoResize": true
        },
        {
          "key": "description",
          "label": "description",
          "canAutoResize": true
        }
      ]
    }
  },
  "detail": {
    "src": "`/adminapi/core.role?_id=${this.id}`",
    "method": "get",
    "transform": "response.data[0]",
    "screen": [
      {
        "name": "Role Details",
        "screen": [
          {
            "path": ".",
            "label": "core.role",
            "type": "json-editor"
          }
        ]
      }
    ]
  }
}
{
  "_id": ObjectId("000000000000000000000110"),
  "navigation_id": "000000000000000000000020",
  "navigation_name": "Site Administration Application",
  "type": "data-table",
  "name": "Web Services Data Table",
  "src": "/adminapi/core.websvc",
  "list": {
    "src": "/adminapi/core.websvc",
    "size": 1000,
    "method": "get",
    "transform": "response.data",
    "filters": [
      {
        "key": "navigation_name",
        "label": "Navigation",
        "optionSrc": "`/adminapi/core.navigation?_sort=title&module=000000000000000000000010&_search=${this.value}`",
        "optionTransform": "response.data",
        "optionLabel": "name"
      }
    ],
    "table": {
      "groupBy": "navigation_name",
      "columns": [
        {
          "key": "navigation_url",
          "label": "navigation_url",
          "canAutoResize": false
        },
        {
          "key": "api_url",
          "label": "api_url",
          "link": "`detail/${row._id}`"
        },
        {
          "key": "description",
          "label": "description"
        },
        {
          "key": "enabled",
          "label": "enabled"
        }
      ]
    }
  },
  "detail": {
    "src": "`/adminapi/core.websvc?_id=${this.id}`",
    "method": "get",
    "transform": "response.data[0]",
    "screen": [
      {
        "name": "Navigation",
        "description": "Define URL of the web services",
        "width": 50,
        "screen": [
          {
            "key": "navigation_id",
            "label": "Select base url",
            "type": "selection",
            "optionSrc": "`/adminapi/core.navigation?_sort=title&module=websvc`",
            "optionLabel": "name",
            "optionKey": "_id",
            "optionTransform": "response.data",
            "updateAlso": [
              {
                "sourceKey": "name",
                "targetKey": "navigation_name"
              },
              {
                "sourceKey": "url",
                "targetKey": "navigation_url"
              }
            ]
          },
          {
            "key": "navigation_url",
            "label": "navigation_url"
          },
          {
            "key": "api_url",
            "label": "api_url"
          }
        ]
      },
      {
        "name": "General",
        "description": "Specify general inforamtion of the web service",
        "width": 50,
        "screen": [
          {
            "key": "_id",
            "label": "_id",
            "readonly": true
          },
          {
            "key": "description",
            "label": "description",
            "type": "text-area"
          },
          {
            "key": "_created",
            "label": "Created At",
            "readonly": true
          },
          {
            "key": "_updated",
            "label": "Updated At",
            "readonly": true
          }
        ]
      },
      {
        "name": "Workflow: GET",
        "description": "Define how webservices will react to the request",
        "width": 25,
        "screen": [
          {
            "key": "get_description",
            "label": "Description",
            "type": "text"
          },
          {
            "key": "get_datasource",
            "label": "Data Source",
            "type": "selection",
            "optionSrc": "/adminapi/core.dataservice?size=1000",
            "optionKey": "_id",
            "optionLabel": "name",
            "optionTransform": "response.data"
          },
          {
            "key": "get_workflow",
            "label": "Workflow",
            "type": "selection",
            "optionSrc": "/adminapi/core.workflow?size=1000",
            "optionKey": "_id",
            "optionLabel": "name",
            "optionTransform": "response.data"
          },
          {
            "key": "get_configuration",
            "label": "Configuration",
            "type": "text-area"
          }
        ]
      },
      {
        "name": "Workflow: POST",
        "description": "Define how webservices will react to the request",
        "width": 25,
        "screen": [
          {
            "key": "post_description",
            "label": "Description",
            "type": "text"
          },
          {
            "key": "post_datasource",
            "label": "Data Source",
            "type": "selection",
            "optionSrc": "/adminapi/core.dataservice?size=1000",
            "optionKey": "_id",
            "optionLabel": "name",
            "optionTransform": "response.data"
          },
          {
            "key": "post_workflow",
            "label": "Workflow",
            "type": "selection",
            "optionSrc": "/adminapi/core.workflow?size=1000",
            "optionKey": "_id",
            "optionLabel": "name",
            "optionTransform": "response.data"
          },
          {
            "key": "post_configuration",
            "label": "Configuration",
            "type": "text-area"
          }
        ]
      },
      {
        "name": "Workflow: PUT",
        "description": "Define how webservices will react to the request",
        "width": 25,
        "screen": [
          {
            "key": "put_description",
            "label": "Description",
            "type": "text"
          },
          {
            "key": "put_datasource",
            "label": "Data Source",
            "type": "selection",
            "optionSrc": "/adminapi/core.dataservice?size=1000",
            "optionKey": "_id",
            "optionLabel": "name",
            "optionTransform": "response.data"
          },
          {
            "key": "put_workflow",
            "label": "Workflow",
            "type": "selection",
            "optionSrc": "/adminapi/core.workflow?size=1000",
            "optionKey": "_id",
            "optionLabel": "name",
            "optionTransform": "response.data"
          },
          {
            "key": "put_configuration",
            "label": "Configuration",
            "type": "text-area"
          }
        ]
      },
      {
        "name": "Workflow: DELETE",
        "description": "Define how webservices will react to the request",
        "width": 25,
        "screen": [
          {
            "key": "delete_description",
            "label": "Description",
            "type": "text"
          },
          {
            "key": "delete_datasource",
            "label": "Data Source",
            "type": "selection",
            "optionSrc": "/adminapi/core.dataservice?size=1000",
            "optionKey": "_id",
            "optionLabel": "name",
            "optionTransform": "response.data"
          },
          {
            "key": "delete_workflow",
            "label": "Workflow",
            "type": "selection",
            "optionSrc": "/adminapi/core.workflow?size=1000",
            "optionKey": "_id",
            "optionLabel": "name",
            "optionTransform": "response.data"
          },
          {
            "key": "delete_configuration",
            "label": "Configuration",
            "type": "text-area"
          }
        ]
      }
    ]
  }
}
{
    "_id": ObjectId("000000000000000000000113"),
    "type": "data-table",
    "name": "Workflow",
    "src": "/adminapi/core.workflow",
    "list": {
      "src": "/adminapi/core.workflow?_sort=name",
      "size": 1000,
      "method": "get",
      "transform": "response.data",
      "table": {
        "columns": [
          {
            "key": "name",
            "label": "name",
            "link": "`detail/${row._id}`"
          },
          {
            "key": "description",
            "label": "description"
          }
        ]
      }

    },
    "detail": {
      "src": "`/adminapi/core.workflow?_id=${this.id}`",
      "method": "get",
      "transform": "response.data[0]",

      "screen": [

        {
          "name": "Workflow Script Details",
          "screen": [
            {
              "key": "_id",
              "label": "_id",
              "readonly": true
            },
            {
              "key": "name",
              "label": "name"
            },
            {
              "key": "description",
              "label": "description",
              "type": "text-area"
            },
            {
              "key": "script",
              "label": "script",
              "type": "text-area"
            }
          ]
        }

      ]


    }

  }
{
  "_id": ObjectId("000000000000000000000000"),
  "type": "data-table",
  "name": "Profile",
  "src": "/adminapi/core.user",
  "detail": {
    "src": "`/adminapi/core.user?id=${this.user.id()}`",
    "method": "get",
    "transform": "response.data[0]",
    "screen": [
      {
        "screen": [
          {
            "key": "id",
            "label": "Login ID",
            "readonly": true
          },

          {
            "key": "name",
            "label": "Name"
          },

          {
            "type": "script-button",
            "buttons": [
              {
                "label": "Change Password",
                "color": "warn",
                "script": "this.event.send({ 'name':'open-dialog', 'uiElementId': '000000000000000000000001', 'data': JSON.parse(JSON.stringify(this.data)) });"
              }
            ]

          }

        ]
      }
    ]
  },
  "_created": ISODate("2018-04-17T18:31:11.192+0000"),
  "_updated": ISODate("2018-04-17T18:31:11.192+0000")
}

{
  "_id" : ObjectId("000000000000000000000001"),
  "name": "Change Password",
  "src": "/adminapi/changepassword",
  "method": "post",
  "screen": [
    {
      "key": "old_password",
      "label": "Current password",
      "inputType": "password"
    },

    {
      "key": "new_password",
      "label": "New  password",
      "inputType": "password"
    },

    {
      "key": "new_password_confirm",
      "label": "Repeat new password",
      "inputType": "password"
    },

    {
      "type": "script-button",
      "buttons": [
        {
          "label": "Change Password",
          "color": "warn",
          "script": "
          this.event.send({'name':'close-dialog'});
          this.rest.request('/adminapi/changepassword', this.data, 'post')
            .subscribe(response => {
                if (response.id) {
                  this.snackBar.open('Changed', null, {duration: 2000})
                }
                else {
                  this.snackBar.open(response.error, null, {duration: 2000})
                }
              }
          );
          "
        },

        {
          "label": "Close",
          "script": "this.event.send({'name':'close-dialog'});",
          "color": "primary"
        }
      ]

    }
  ]
}
{
    "_id": ObjectId("000000000000000000000120"),
    "type": "data-table",
    "name": "Scheduled Task",
    "src": "/adminapi/core.scheduled_task",
    "list": {
        "src": "/adminapi/core.scheduled_task",
        "method": "get",
        "transform": "response.data",
        "table": {
            "columns": [
                {
                    "key": "name",
                    "label": "Task name",
                    "link": "`detail/${row._id}`"
                },
                {
                    "key": "last_run_result",
                    "label": "Last Status",
                    "canAutoResize": false
                },
                {
                    "key": "next_run_date",
                    "label": "Next Run",
                    "type": "date",
                    "lang": "it",
                    "format": "L LT",
                    "canAutoResize": false
                }
            ]
        }
    },
    "detail": {
        "src": "`/adminapi/core.scheduled_task?_id=${this.id}`",
        "method": "get",
        "transform": "response.data[0]",
        "screen": [
            {
                "name": "Dettaglio Task",
                "width": 35,
                "screen": [
                    {
                        "key": "name",
                        "label": "Task name"
                    },
                    {
                        "key": "schedule",
                        "label": "Schedule Rule"
                    },
                    {
                        "key": "next_run_date",
                        "label": "Next Run",
                        "transform": "this.data.next_run_date ? moment(this.data.next_run_date).format('L LT') : ''"
                    },
                    {
                        "key": "last_run_result",
                        "label": "Last Run Result",
                        "readonly": true
                    },
                    {
                        "type" : "script-button",
                        "buttons" : [
                            {
                                "label" : "Run Script",
                                "color" : "warn",
                                "script" : "this.data.last_run_result = ''; this.data.logs = []; this.data.next_run_date = new Date(); this.event.send({ 'name': 'save' }); setTimeout(() => this.event.send({ 'name': 'refresh' }), 5000);"
                            }
                        ]
                    }
                ]
            },
            {
                "name": "Log",
                "width": 65,
                "screen": [
                    {
                        "key": "logs",
                        "type" : "simple-table",
                        "columns" : [
                            {
                                "key" : "msg",
                                "label" : "msg"
                            },
                            {
                                "key" : "_created",
                                "label" : "created",
                                "type" : "date",
                                "format" : "L LTS",
                                "lang" : "it",
                                "canAutoResize" : false
                            }
                        ]
                    }
                ]
            },
            {
                "name": "Script",
                "width": 100,
                "screen": [
                    {
                        "key": "script",
                        "label": "Script",
                        "type": "text-area",
                        "rows": 10
                    }
                ]
            }
        ]
    },
    "_created": ISODate("2018-05-16T16:58:50.083+0000"),
    "_updated": ISODate("2018-05-16T16:58:50.083+0000")
}
